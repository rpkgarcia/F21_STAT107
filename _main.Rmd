--- 
title: "STAT 107 Outline of Class Notes"
author: "Rebecca Kurtz-Garcia"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
# url: your book url like https://bookdown.org/yihui/bookdown
# cover-image: path to the social sharing image like images/cover.jpg
description: |
  This is a minimal example of using the bookdown package to write a book.
  The HTML output format for this example is bookdown::gitbook,
  set in the _output.yml file.
link-citations: yes
github-repo: rstudio/bookdown-demo
mainfont: Arial
monofont: "Courier New"
#monotonoptions: "Scale =0.7"
---
--- 
title: "STAT 107 Outline of Class Notes"
author: "Rebecca Kurtz-Garcia"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
# url: your book url like https://bookdown.org/yihui/bookdown
# cover-image: path to the social sharing image like images/cover.jpg
description: |
  This is a minimal example of using the bookdown package to write a book.
  The HTML output format for this example is bookdown::gitbook,
  set in the _output.yml file.
link-citations: yes
github-repo: rstudio/bookdown-demo
mainfont: Arial
monofont: "Courier New"
#monotonoptions: "Scale =0.7"
---

# Welcome {-}

Welcome to STAT 107! This document will contain and outline of the course notes throughout the quarter.  Please see the course website for an approximate schedule.  In each of the chapters there will be a list of links, resources, and videos for learning more about an individual topic.  This document will be updated constantly, be sure to check here for periodic updates.  In addition, this document does not serve as a substitute for in class instruction, but more as a guide for the general content we discuss.  Students are still expected to attend every lecture.  

<!--chapter:end:index.Rmd-->


# Introduction to R

Placeholder


## Download and Install R and Rstudio
## The **RStudio** Interface 
### Bottom Left Pane {-}
### Bottom Right Pane {-}
### Top Right Pane {-}
### Top Left Pane {-}
## Comments 
## Operators {#operators}
### Arithmetic Operators {-}
### Relational Operators {-}
### Logical operators {-}
### Assignment Operators {-}
## Additional Resources 

<!--chapter:end:01-intro.Rmd-->


# Introduction to R Objects  

Placeholder


## Atomic Objects 
### Numeric {-}
### Integer {-}
### Logical {-}
### Character {-}
## Vectors
## Lists 
## Matrices
## Factors
## Data Frames
## Other Object Types and the Global Environment
## Additional Resources 
## Factors 
## Lists 

<!--chapter:end:02-objects.Rmd-->


# Working with Data Sets

Placeholder


## Getting Data Sets in Our Working Environment
### Built-In Data {-}
### Importing From Your Computer{-}
### Import From Online {-}
## Basic Data Manipulation
### Indexing {-}
### Rearranging Rows {-}
### Adding Columns {-}
### NA values {-}
### NULL {-}
### Adding Rows {-}

<!--chapter:end:03-working-with-data.Rmd-->


# Functions {#functions}

Placeholder


## Build Your Own Function
## Lexical Scoping 
## Built-In Functions
## Help Files 
## The ... Argument
## Generic Functions 
## Additional Resources

<!--chapter:end:04-functions.Rmd-->


# If Statements

Placeholder


## If 
## If Else 
## Else If 
## Ifelse
## Nested If Chains
## Additional Resources

<!--chapter:end:05-if-statements.Rmd-->


# Base R Plotting

Placeholder


## Load A Big Data Set
## Histograms 
## Boxplot
## Scatter Plot
## Pie Charts
## Adding Extra Lines/Points/Elements to a Graph
## The par() Help File 
## Adding Legends
## The "maps" Package
## What makes a good plot? 

<!--chapter:end:06-baseR-plotting.Rmd-->


# Packages {#packages}

Placeholder


## Namespace Collisions  

<!--chapter:end:07-packages.Rmd-->


# Loops

Placeholder


## While Loop
## For Loops
## Break 
## Next 
## Nested Loops
## Additional Resources

<!--chapter:end:08-loops.Rmd-->


#  Apply Family of Functions

Placeholder


## apply() function 
## lapply() function 
## sapply() function 
## tapply() function 

<!--chapter:end:09-apply-family.Rmd-->

# Introduction To Text Data Analysis

In this section we give an introduction to strings and string operations, how to extracting and manipulating string objects, and an introduction to general search methods. 

We have focus on character objects in particular because a lot of the "messy" data comes in character form. For example, web pages can be scraped, email can be analyzed for network properties and survey responses must be processed and compared. Even if you only care about numbers, it helps to be able to extract them from text and manipulate them easily.

In general we will try to stick to the following distinction. However, many people will use the term "character" and "string" interchangeably. 

- ***Character***: a symbol in a written language, specifically what you can enter at a keyboard: letters, numerals, punctuation, space, newlines, etc.

```
'L', 'i', 'n', 'c', 'o', 'l'
```

- ***String***: a sequence of characters bound together
```
Lincoln
```

Note: R does not have a separate type for characters and strings

```{r}
class("L")
class("Lincoln")
```


## Making Strings

Use single or double quotes to construct a string, but in general its recommeded to use double quotes. This is because the R console showcases character strings in double quotes regardless of how the string was created, and sometimes we might have single or double quotes in the string itself.

```{r}
'Lincoln'
"Lincoln"
"Abraham Lincoln's Hat"
"As Lincoln never said, 'Four score and seven beers ago'"
'As Lincoln never said, "Four score and seven beers ago"'
```

The space, `" "` is a character; so are multiple spaces `"   "` and the empty string, `""`.

Some characters are special, so we have "escape characters" to specify them in strings.
- quotes within strings: `\"`
- tab: `\t`
- new line `\n` and carriage return `\r` -- use the former rather than the latter when possible.


Recall that strings (or character objects) are one of the atomic data types, like `numeric` or `logical`. Thus strings can go into scalars, vectors, arrays, lists, or be the type of a column in a data frame. We can use the `nchar()` to get the length of a single string. 

```{r}
length("Abraham Lincoln's beard")
length(c("Abraham", "Lincoln's", "beard"))
nchar("Abraham")
nchar("Abraham Lincoln's beard")
nchar(c("Abraham", "Lincoln's", "beard"))
```


We can use `print()` to display the string, and `cat()` is used to write the string directly to the console. If you're debugging, `message()` is R's preferred syntax.

```{r}
presidents = c("Fillmore","Pierce","Buchanan","Davis","Johnson")

print("Abraham Lincoln")

cat("Abraham Lincoln")

cat(presidents)

message(presidents)
```


## Substring Operations


***Substring***: a smaller string from the big string, but still a string in its own right. 

A string is not a vector or a list, so we ***cannot*** use subscripts like `[[ ]]` or `[ ]` to extract substrings; we use `substr()` instead.

```{r}
phrase <- "Christmas Bonus"
substr(phrase, start=8, stop=12)
```

We can also use `substr` to replace elements:

```{r}
substr(phrase, 13, 13) = "g"
phrase
```


The function `substr()` can also be used for vectors.


`substr()` vectorizes over all its arguments:

```{r}
presidents

substr(presidents,1,2)   # First two characters

substr(presidents,nchar(presidents)-1,nchar(presidents))   # Last two

substr(presidents,20,21)    # No such substrings so return the null string

substr(presidents,7,7)      # Explain!
```


## Dividing Strings into Vectors


`strsplit()` divides a string according to key characters, by splitting each element of the character vector `x` at appearances of the pattern `split`.

```{r}
scarborough.fair = "parsley, sage, rosemary, thyme"
strsplit(scarborough.fair, ",")
strsplit(scarborough.fair, ", ")
```

Pattern is recycled over elements of the input vector:

```{r}
strsplit (c(scarborough.fair, "Garfunkel, Oates", "Clement, McKenzie"), ", ")
```

Note that it outputs a `list` of character vectors.


## Converting Objects into Strings


Explicitly converting one variable type to another is called ***casting***. Notice that the number "7.2e12" is printed as supplied, but "7.2e5" is not.  This is because if a number is exceeding large, small, or close to zero, then R will by default use scientific notation for that number. 

```{r}
as.character(7.2)            # Obvious
as.character(7.2e12)         # Obvious
as.character(c(7.2,7.2e12))  # Obvious
as.character(7.2e5)          # Not quite so obvious
```

## Versatility of the paste() Function
The `paste()` function is very flexible. With one vector argument, works like `as.character()`.

```{r}
paste(41:45)
```

With 2 or more vector arguments, it combines them with recycling.
```{r}
paste(presidents,41:45)
paste(presidents,c("R","D"))  # Not historically accurate!
paste(presidents,"(",c("R","D"),41:45,")")
```

We can changing the separator between pasted-together terms. 

```{r}
paste(presidents, " (", 41:45, ")", sep="_")
paste(presidents, " (", 41:45, ")", sep="")
```


We can also condense multiple strings together using the `collapse` argument.

```{r}
paste(presidents, " (", 41:45, ")", sep="", collapse="; ")
```

Default value of `collapse` is `NULL` -- that is, it won't use it. 

## gsub , sub

gsub is all occurances, and sub is first occurance. 


Text of Some Importance
=========


  If we shall suppose that American slavery is one of those
  offenses which, in the providence of God, must needs come, but which, having
  continued through His appointed time, He now wills to remove, and that He
  gives to both North and South this terrible war as the woe due to those by
  whom the offense came, shall we discern therein any departure from those
  divine attributes which the believers in a living God always ascribe to Him?
  Fondly do we hope, fervently do we pray, that this mighty scourge of war may
  speedily pass away.  Yet, if God wills that it continue until all the wealth
  piled by the bondsman's two hundred and fifty years of unrequited toil shall
  be sunk, and until every drop of blood drawn with the lash shall be paid by
  another drawn with the sword, as was said three thousand years ago, so still
  it must be said "the judgments of the Lord are true and righteous
  altogether."



More text
=========

```{r}
al2 <- readLines("al.txt")
length(al2)
head(al2)
```

`al2` is a vector, one element per line of text


## Search

We can search through text strings for certain patterns.  Some particularly helpful functions for doing this are `grep()` and `grepl()`.  The `grep()` function 

Narrowing down entries: use `grep()` to find which strings have a matching search term

```{r}
# Returns indices for which element in al2 has the term "God"
grep("God", al2)

# Returns T/F values for which indices have the term "God" 
grepl("God", al2)

# Returns the the elements in al2 that have the term "God" 
al2[grep("God", al2)]
```


## Word Count Tables 

Lets convert all the words in this document into a single string.  Then we can 

```{r}
al2 = paste(al2, collapse=" ")
al2.words = strsplit(al2, split=" ")[[1]]
head(al2.words)
```


Tabulate how often each word appears using the `table()` function.  Then we can sort the frequencies in order using `sort()`.

```{r}
wc = table(al2.words)
wc = sort(wc,decreasing=TRUE)
head(wc,20)
```

Notice that puncuation using these methods is still present. 

```{r}
wc["years"]
wc["years,"]
```

In addition, all our words and string subsets are case sensitive. 
```{r}
# What happens when we look for a word that is not in our 
# word count table? 

# words are case sensitive 
wc["that"]


which(names(wc)  == "That")
wc["That"]
```


<!--chapter:end:10-text-analysis.Rmd-->

`r if (knitr::is_html_output()) '
# References {-}
'`

<!--chapter:end:99-references.Rmd-->

